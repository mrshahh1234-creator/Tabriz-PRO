<!DOCTYPE html>
<html lang="uz">
<head><meta charset="UTF-8"><link rel="stylesheet" href="style.css"><title>New Order</title></head>
<body>
    <div class="sidebar">
        <div class="brand">TABRIZ PRO</div>
        <a href="dashboard.html" class="nav-item">üìä –ê—Å–æ—Å–∏–π –ü–∞–Ω–µ–ª</a>
        <a href="order.html" class="nav-item active">‚ûï –Ø–Ω–≥–∏ –†–∞—Å–∫—Ä–æ–π</a>
    </div>

    <div class="main">
        <div class="glass-card">
            <h2>–ü–ê–†–ê–ú–ï–¢–†–õ–ê–†</h2>
            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px;">
                <div>
                    <label>–ú–∞—Ç–µ—Ä–∏–∞–ª —Ç—É—Ä–∏</label>
                    <select id="mat">
                        <option value="2800x2070">–õ–î–°–ü –û“ö (2800x2070)</option>
                        <option value="2800x2070">–õ–î–°–ü –†–ê–ù–ì–õ–ò (2800x2070)</option>
                        <option value="2800x1220">–ú–î–§ –ê–ö–†–ò–õ (2800x1220)</option>
                    </select>
                </div>
                <div>
                    <label>–ê—Ä—Ä–∞ “õ–∞–ª–∏–Ω–ª–∏–≥–∏ (–º–º)</label>
                    <input type="number" id="kerf" value="4">
                </div>
            </div>

            <h3 style="margin-top: 30px;">–î–ï–¢–ê–õ–õ–ê–† –†–é–ô–•–ê–¢–ò</h3>
            <table id="tbl">
                <thead>
                    <tr>
                        <th>–£–∑—É–Ω–ª–∏–∫ (–º–º)</th>
                        <th>–≠–Ω–∏ (–º–º)</th>
                        <th>–°–æ–Ω–∏</th>
                        <th>–ö—Ä–æ–º–∫–∞ (L1,L2 / W1,W2)</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            
            <div style="display: flex; gap: 15px; margin-top: 20px;">
                <button class="btn" style="background: transparent; border: 1px solid var(--gold); color: var(--gold);" onclick="add()">+ “ö–∞—Ç–æ—Ä “õ—û—à–∏—à</button>
                <button class="btn" onclick="calc()">üìê –†–ê–°–ö–†–û–ô–ù–ò “≤–ò–°–û–ë–õ–ê–®</button>
            </div>
        </div>
    </div>

    <div class="academy-watermark">MUSTAFAYEV ACADEMY</div>

    <script>
        function add() {
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td><input type="number" class="l" value="600" style="margin:0"></td>
                <td><input type="number" class="w" value="400" style="margin:0"></td>
                <td><input type="number" class="q" value="1" style="margin:0"></td>
                <td>
                    <div style="display:flex; gap:5px; justify-content:center;">
                       <input type="checkbox" class="e1" style="width:20px; height:20px; margin:0;"> 
                       <input type="checkbox" class="e2" style="width:20px; height:20px; margin:0;"> | 
                       <input type="checkbox" class="e3" style="width:20px; height:20px; margin:0;"> 
                       <input type="checkbox" class="e4" style="width:20px; height:20px; margin:0;">
                    </div>
                </td>
                <td><button onclick="this.closest('tr').remove()" style="background:none; border:none; color:red; cursor:pointer; font-size:18px;">‚úñ</button></td>
            `;
            document.getElementById('tbl').appendChild(tr);
        }

        function calc() {
            let parts = [];
            document.querySelectorAll('#tbl tr').forEach(r => {
                const q = +r.querySelector('.q').value;
                for(let i=0; i<q; i++) {
                    parts.push({
                        l: +r.querySelector('.l').value, 
                        w: +r.querySelector('.w').value,
                        e: [r.querySelector('.e1').checked, r.querySelector('.e2').checked, r.querySelector('.e3').checked, r.querySelector('.e4').checked]
                    });
                }
            });
            if(parts.length === 0) return alert("–î–µ—Ç–∞–ª –∫–∏—Ä–∏—Ç–∏–Ω–≥!");
            localStorage.setItem('parts', JSON.stringify(parts));
            localStorage.setItem('matType', document.getElementById('mat').value);
            localStorage.setItem('kerf', document.getElementById('kerf').value);
            window.location.href = 'nesting.html';
        }
        add(); // –ë–æ—à–∏–¥–∞ 1 —Ç–∞ “õ–∞—Ç–æ—Ä
    </script>
</body>
</html>
