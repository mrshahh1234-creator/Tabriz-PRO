<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raspilnaya.pro | –ó–∞–∫–∞–∑ –¥–ª—è –º–∞—Å—Ç–µ—Ä–æ–≤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f1f5f9; }
        .card { background: white; border-radius: 1.25rem; border: 1px solid #e2e8f0; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.05); }
        .input-field { width: 100%; padding: 0.75rem; border-radius: 0.75rem; border: 1px solid #cbd5e1; outline: none; transition: 0.2s; }
        .input-field:focus { border-color: #2563eb; box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1); }
    </style>
</head>
<body class="p-4 md:p-10">

    <div class="max-w-6xl mx-auto">
        <header class="mb-10 text-center md:text-left flex flex-col md:flex-row justify-between items-end gap-4">
            <div>
                <h1 class="text-4xl font-black text-slate-900 tracking-tight">RASPILNAYA<span class="text-blue-600">.PRO</span></h1>
                <p class="text-slate-500 mt-2 font-medium">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–∏–µ–º –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ —Ä–∞—Å–ø–∏–ª –∏ –∫—Ä–æ–º–ª–µ–Ω–∏–µ</p>
            </div>
            <div class="bg-blue-600 text-white px-5 py-2 rounded-2xl text-sm font-bold shadow-lg shadow-blue-200">
                –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –º–∞—Å—Ç–µ—Ä–∞
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <div class="lg:col-span-1 space-y-6">
                <div class="card p-6">
                    <h2 class="text-lg font-bold mb-5 flex items-center gap-2 text-slate-800">
                        <i class="fas fa-user-circle text-blue-600"></i> –î–∞–Ω–Ω—ã–µ –º–∞—Å—Ç–µ—Ä–∞
                    </h2>
                    <div class="space-y-4">
                        <div>
                            <label class="text-[11px] font-bold text-slate-400 uppercase ml-1">–ò–º—è –∏ –§–∞–º–∏–ª–∏—è</label>
                            <input type="text" id="fullName" class="input-field mt-1" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è">
                        </div>
                        <div>
                            <label class="text-[11px] font-bold text-slate-400 uppercase ml-1">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                            <input type="tel" id="phone" class="input-field mt-1" placeholder="+998901234567">
                        </div>
                    </div>
                </div>

                <div class="card p-6 bg-slate-900 text-white border-none shadow-xl">
                    <h2 class="text-lg font-bold mb-5 flex items-center gap-2">
                        <i class="fas fa-couch text-blue-400"></i> –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∑–∞–∫–∞–∑–∞
                    </h2>
                    <div class="space-y-4">
                        <div>
                            <label class="text-[11px] font-bold text-slate-500 uppercase">–ú–∞—Ç–µ—Ä–∏–∞–ª –æ—Å–Ω–æ–≤—ã</label>
                            <input type="text" id="material" class="input-field mt-1 bg-slate-800 border-slate-700 text-white" placeholder="–õ–î–°–ü –î—É–± –í–æ—Ç–∞–Ω 18–º–º">
                        </div>
                        <div>
                            <label class="text-[11px] font-bold text-slate-500 uppercase">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∫—Ä–æ–º–∫–∏</label>
                            <input type="text" id="edgeName" class="input-field mt-1 bg-slate-800 border-slate-700 text-white" placeholder="–ü–í–•">
                        </div>
                        <div>
                            <label class="text-[11px] font-bold text-slate-500 uppercase">–¢–æ–ª—â–∏–Ω–∞ –∫—Ä–æ–º–∫–∏</label>
                            <select id="edgeThickness" class="input-field mt-1 bg-slate-800 border-slate-700 text-white">
                                <option value="0.4–º–º">0.4 –º–º</option>
                                <option value="1.0–º–º">1.0 –º–º</option>
                                <option value="2.0–º–º">2.0 –º–º</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-2">
                <div class="card p-8 min-h-full">
                    <div class="flex justify-between items-center mb-8">
                        <h2 class="text-xl font-bold text-slate-800 flex items-center gap-3">
                            <i class="fas fa-th-list text-blue-600"></i> –°–ø–∏—Å–æ–∫ –¥–µ—Ç–∞–ª–µ–π
                        </h2>
                        <button onclick="addRow()" class="bg-blue-50 text-blue-600 font-bold px-4 py-2 rounded-xl hover:bg-blue-100 transition flex items-center gap-2">
                            <i class="fas fa-plus text-xs"></i> –î–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å
                        </button>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="text-left text-[11px] font-black text-slate-400 uppercase tracking-widest border-b pb-4">
                                    <th class="pb-4 px-2">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
                                    <th class="pb-4 px-2 w-24">–î–ª–∏–Ω–∞</th>
                                    <th class="pb-4 px-2 w-24">–®–∏—Ä–∏–Ω–∞</th>
                                    <th class="pb-4 px-2 w-16 text-center">–ö–æ–ª-–≤–æ</th>
                                    <th class="pb-4 px-2 text-center">–ö—Ä–æ–º–∫–∞</th>
                                    <th class="pb-4 w-10"></th>
                                </tr>
                            </thead>
                            <tbody id="tableBody" class="divide-y divide-slate-50"></tbody>
                        </table>
                    </div>

                    <div class="mt-12 flex justify-end">
                        <button onclick="sendToBot()" class="w-full md:w-auto bg-blue-600 text-white px-12 py-5 rounded-2xl font-black text-lg hover:bg-blue-700 transition shadow-2xl shadow-blue-200 flex items-center justify-center gap-4">
                            <span>–û–¢–ü–†–ê–í–ò–¢–¨ –ó–ê–ö–ê–ó</span>
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const BOT_TOKEN = '7927717291:AAG4h_LbZoY-1s2y0_zzNoCFudrU7pPDNas';
        const CHAT_ID = '1015769230';

        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('fullName').value = localStorage.getItem('m_name') || '';
            document.getElementById('phone').value = localStorage.getItem('m_phone') || '';
            for(let i=0; i<3; i++) addRow();
        });

        function addRow() {
            const tr = document.createElement('tr');
            tr.className = "group hover:bg-blue-50/30 transition";
            tr.innerHTML = `
                <td class="py-4 px-2"><input type="text" class="w-full bg-transparent outline-none font-medium val-name" placeholder="–ù–∞–ø—Ä: –§–∞—Å–∞–¥"></td>
                <td class="py-4 px-2"><input type="number" class="w-full bg-transparent outline-none font-bold val-len" placeholder="0"></td>
                <td class="py-4 px-2"><input type="number" class="w-full bg-transparent outline-none font-bold val-width" placeholder="0"></td>
                <td class="py-4 px-2"><input type="number" class="w-full bg-transparent outline-none font-bold text-center val-count" value="1"></td>
                <td class="py-4 px-2">
                    <div class="flex gap-1 justify-center">
                        ${['L1', 'L2', 'W1', 'W2'].map(e => `
                            <label class="cursor-pointer">
                                <input type="checkbox" value="${e}" class="hidden peer val-edge">
                                <span class="w-8 h-8 flex items-center justify-center rounded-lg border border-slate-200 text-[10px] font-bold text-slate-400 peer-checked:bg-blue-600 peer-checked:text-white peer-checked:border-blue-600 transition-all">${e}</span>
                            </label>
                        `).join('')}
                    </div>
                </td>
                <td class="py-4 text-right">
                    <button onclick="this.parentElement.parentElement.remove()" class="text-slate-300 hover:text-red-500 transition"><i class="fas fa-trash-alt"></i></button>
                </td>
            `;
            document.getElementById('tableBody').appendChild(tr);
        }

        async function sendToBot() {
            const name = document.getElementById('fullName').value;
            const phone = document.getElementById('phone').value;
            const mat = document.getElementById('material').value;
            const eName = document.getElementById('edgeName').value;
            const eThick = document.getElementById('edgeThickness').value;

            if (!name || !phone || !mat) return alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –º–∞—Å—Ç–µ—Ä–∞ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª!');

            localStorage.setItem('m_name', name);
            localStorage.setItem('m_phone', phone);

            const details = Array.from(document.querySelectorAll('#tableBody tr')).map(row => ({
                n: row.querySelector('.val-name').value,
                l: row.querySelector('.val-len').value,
                w: row.querySelector('.val-width').value,
                c: row.querySelector('.val-count').value,
                e: Array.from(row.querySelectorAll('.val-edge:checked')).map(cb => cb.value)
            })).filter(d => d.n && d.l && d.w);

            if (details.length === 0) return alert('–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –¥–µ—Ç–∞–ª—å —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏!');

            let text = `üöÄ *–ù–û–í–´–ô –ó–ê–ö–ê–ó*\n\n`;
            text += `üë§ *–ú–∞—Å—Ç–µ—Ä:* ${name}\n`;
            text += `üìû *–¢–µ–ª–µ—Ñ–æ–Ω:* [${phone}](tel:${phone})\n`;
            text += `ü™µ *–ú–∞—Ç–µ—Ä–∏–∞–ª:* ${mat}\n`;
            text += `üßµ *–ö—Ä–æ–º–∫–∞:* ${eName} (${eThick})\n`;
            text += `‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\n`;

            details.forEach((d, i) => {
                text += `${i + 1}. *${d.n}*\n   üìè ${d.l} x ${d.w} ‚Äî *${d.c} —à—Ç.*\n   üìç –ö—Ä–æ–º–∫–∞: ${d.e.length > 0 ? d.e.join(', ') : '–Ω–µ—Ç'}\n\n`;
            });

            try {
                const res = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ chat_id: CHAT_ID, text: text, parse_mode: 'Markdown' })
                });
                if (res.ok) alert('–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ raspilnaya_bot!');
            } catch (err) { alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏!'); }
        }
    </script>
</body>
</html>
